

<!doctype html>
<html>
<head>
    <title></title>
    <link href="../assets/css/styles.css" rel="stylesheet">
    <script src="../assets/js/intro.min.js" type="text/javascript" charset="utf-8"></script>
</head>
<body>
<div id="wrapper">
	<nav>	
		<dl>
            <dt><a href="../index.html">xi4n - 0.1.0-unstable</a></dt>
            <dd><a href="../index.html">What?</a></dd>
            <dt><a href="../docs/getting-started.html">Getting started</a></dt>
                <dd><a href="../docs/getting-started.html#getting-started-tlwr">Too Lazy; Won't Read?</a></dd>
                <dd><a href="../docs/getting-started.html#getting-started-first">Stuff you need first</a></dd>
				<dd><a href="../docs/getting-started.html#getting-started-install">Installing</a></dd>
				<dd><a href="../docs/getting-started.html#getting-started-create-config">Creating a
				configuration</a></dd>
				<dd><a href="../docs/getting-started.html#getting-started-run-config">Running the configuration</a></dd>
				<dd><a href="../docs/getting-started.html#getting-started-now-what">Where to go next?</a></dd>
				<dd><a href="../docs/getting-started.html#getting-started-upgrading">Upgrading to newer
				versions</a></dd>
			<dt><a href="../docs/plugins.html#plugins">Plugins? Plugins!</a></dt>
				<dd><a href="../docs/plugins.html#plugins-what">What?</a></dd>
				<dd><a href="../docs/plugins.html#plugins-included">Included plugins</a></dd>
				<dd><a href="../docs/plugins.html#plugins-writing">Writing plugins</a></dd>
			<dt><a href="../docs/config.html#config">Configuration File Anatomy</a></dt>
				<dd><a href="../docs/config.html#config-yaml">YAML?</a></dd>
				<dd><a href="../docs/config.html#config-tour">Tour</a></dd>
				<dd><a href="../docs/config.html#config-reference">Reference</a></dd>
			<dt><a href="../docs/library.html#library">Library usage</a></dt>
				<dd><a href="../docs/library.html#library-api">API</a></dd>
		</dl>
	</nav>

    <div id="contentWrapper">
        			<article id="plugins">
			<h1>Plugins? Plugins!</h1>
			<h2 id="plugins-what">What?</h2>
			<p>Plugins are the heart of xi4n.</p>
			<p>By itself xi4n does very little other than maintain a connection
			to LFS. A plugin listens for events generated by xi4n's connection
			to LFS and performs actions accordingly.</p>
			<p>This can range from cancelling votes, to drawing buttons
			on-screen, to changing track. It's all down to what you want to do.</p>
			<h2 id="plugins-included">Included plugins</h2>
			<p>By default if you use any of the following plugins in your
			config.yaml, they'll automatically be found and and included.</p>
			<table border="0" class="table table-striped">
				<thead>
					<tr>
						<th>Name/Path</th>
						<th>And it does?</th>
						<th>Requires</th>
						<th>Options</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>busy</td><td>An anti-idler plugin</td><td></td><td></td>
					</tr>
					<tr>
						<td>gauges</td><td>An outgauge plugin that draws a
							beatiful gauge on a webpage, representing whats
							happening on the car you're driving (in real
							time)</td><td></td><td></td>
					</tr>
					<tr>
						<td>livemap2</td><td>A live tracker map, that displays
							on a web page, the live positions of racers (in real
							time)</td><td>state</td><td><ul>
								<li>http-port: port number to run the web server
								on</li>
							</ul></td>
					</tr>
					<tr>
						<td>veto</td><td>An anti-vote plugin</td><td></td>
					</tr>
					<tr>
						<td>powered-by-text</td><td>A small example plugin, that
							shows how to display text when someone connects to a
							server</td><td></td><td></td>
					</tr>
					<tr>
						<td>powered-by-buttons</td><td>A small example plugin,
							that shows how to display a button that auto-hides
							when someone connects to a server</td><td></td><td></td>
					</tr>
					<tr>
						<td>state</td><td>A "meta" plugin that maintains a
							definition of the current state of LFS including
							players, connections and server state (weather,
							track, etc.) - many plugins will probably depend on this, 
							typically you will most	likely be asked to add the plugin, 
							but do nothing else with it.</td><td></td><td></td>
                    </tr>
					<tr>
						<td>slmbr</td><td>A joke InSim application, that rewards
                        players for not moving.</td><td>state</td><td><ul>
                                <li>db: path to database file (<a
                                href="https://github.com/felixge/node-dirty">dirty</a> database)</li>
							</ul></td>
					</tr>
					<tr>
						<td>tv</td><td>A Work In Progress automatic TV director
                            </td><td>state</td></td>
					</tr>
				</tbody>
			</table>
			<h2 id="plugins-writing">Writing plugins <small>You know Javascript, right?</small></h2>
			<p>Seriously, you do need to know Javascript and it's
            idiosyncrasies. Particularly how <a
            href="http://javascriptplayground.com/blog/2012/04/javascript-variable-scope-this">scoping
            &amp; 'this' works</a>. xi4n takes advantage of it.</p>
            <p>In addition you should understand that basic idea that the
            information from LFS is received in packets.</p>
            <p>All plugins do are listen for events and then run code. Those
            events can be generated by xi4n when a packet of information is
            received and parsed, or it can be generated by another plugin.</p>

            <h3>Events <small>It's almost all in InSim.txt damnit!</small></h3>
            <p>The main events that you'll be listening for in a plugin are
            actually InSim, OutSim, Outgauge, OutSim and relay packets. Each time a
            packet is received and parsed it's emitted by name.</p>
            <p>For example the event for an IS_MSO is "IS_MSO".</p>
            <p>A full list of packets for InSim, OutSim, Outgauge and Outsim can
            be found in Insim.txt (either in &lt;LFS Path&gt;/docs/, or on the
            <a href="http://en.lfsmanual.net/wiki/InSim.txt">LFS Wiki</a>.</p>
            <p>That said, it is possible for another plugin to generated events.
            The state plugin is one such example, which most complex plugins
            will probably want to use. You can read more about it next.</p>

            <h3>Using the state meta-plugin <small>The helper plugin</small></h3>
            <p>The state plugin maintains a view of a LFS InSim connection,
            including track, weather, player connections, players racing on
            track, etc. and provides an abstracted event system that all plugins
            can use. This means that each plugin doesn't have to do this by
            itself - minimizing faults and repetition.</p>

            <table class="table table-striped" border="0">
                <thead>
                    <th>Event</th><th>Description</th>
                </thead>
            </table>

            <h3>Generating a skeleton plugin <small>The boring bits can be
            automated</small></h3>
            <p>Switch into the config directory and run the following:</p>
            <pre><code>xi4n boilerplate plugins/&lt;plugin-name&gt;</code></pre>
            <p>This generates a directory with the same name as the plugin and a
            basic package.json, and plugin file.</p>
			</article>

	</div>
</body>
</html>
<!-- vim: set ts=4 sw=4 tw=80 expandtab :-->
